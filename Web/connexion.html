<html lang="fr">
<head>
    <link rel="icon" href="MD_image/logowhite.png" type="image/png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PurpleLab</title>
    <link rel="stylesheet" href="css/main.css?v=4.1">
</head>
<body class="blank">
    <div id="logo-container">
       <img src="/MD_image/logo.png" alt="PurpleLab Logo" />
    </div>
    <div class="body-container">
        <div class="background-image-section">
            
        </div>
        
        <div class="form-section">
            <div id="form-container">
                <form action="authenticate.php" method="post">
                    <br><br><br><br><br><br>
                    <h1>Hello,</h1> 
                    <p>Sign in to start your session</p>
                    <div class="input-container">
                        <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12,2A10,10,0,1,0,22,12,10,10,0,0,0,12,2Zm0,3a3,3,0,1,1-3,3A3,3,0,0,1,12,5Zm0,14.2a7.2,7.2,0,0,1-6-3.1,5.61,5.61,0,0,1,12,0A7.2,7.2,0,0,1,12,19.2Z"/>
                        </svg>
                        <input type="email" id="email" name="email" placeholder="Email">
                    </div>
                    <div class="input-container"> 
                        <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2C8.13 2 5 5.13 5 9v3h2V9c0-2.76 2.24-5 5-5s5 2.24 5 5v3h2V9c0-3.87-3.13-7-7-7zm-1 9H6v9h12v-9h-5v-2c0-1.65-1.35-3-3-3s-3 1.35-3 3v2zm1 0h4v-2c0-.55.45-1 1-1s1 .45 1 1v2h-6v-2z"/>
                        </svg>
                        <input type="password" id="password" name="password" placeholder="Password">
                    </div>  
                    <input type="submit" class="login-button" value="Login" style="margin-right: 5px;">
                    <input type="submit" id="create-account-button" class="register-button" value="Register">
                </form>
            </div>
        </div>
        
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            const createAccountButton = document.getElementById('create-account-button');
            const logoContainer = document.getElementById('logo-container');
            const formContainer = document.getElementById('form-container');
    
            createAccountButton.addEventListener('click', () => {
                // Hide logo
                logoContainer.style.display = 'none';
    
                // Change the contents of formContainer to display the registration form
                formContainer.innerHTML = `
<div id="form-container" class="register-container">
    <form action="register.php" method="post" enctype="multipart/form-data">
        <h1 class="register-form-title">üìù Registration</h1>
        <div class="register-input-container">
            <label for="firstName"><b>FirstName:</b></label>
            <input type="text" id="firstName" name="firstName" class="register-input" required>
        </div>
        <div class="register-input-container">
            <label for="lastName"><b>LastName:</b></label>
            <input type="text" id="lastName" name="lastName" class="register-input" required>
        </div>
        <div class="register-input-container">
            <label for="email"><b>Email:</b></label>
            <input type="email" id="email" name="email" class="register-input" required>
        </div>
        <div class="register-input-container">
            <label for="analystLevel"><b>Analyst level:</b></label>
            <select id="analystLevel" name="analystLevel" class="register-select" required>
                <option value="N1">N1</option>
                <option value="N2">N2</option>
                <option value="N3">N3</option>
            </select>
        </div>
        <div class="register-file-input">
            <label for="avatar"><b>Avatar:</b></label>
            <div class="input-file-container">
                <span class="register-file-trigger">Select a file...</span>
                <input type="file" id="avatar" name="avatar" class="input-file" accept="image/png, image/jpeg, image/jpg" required>
                <span id="file-name" class="file-name"></span>
                <span id="selected-file-name" style="display: block;"></span>
            </div>
        </div>
        <div class="register-input-container">
            <label for="password"><b>Password:</b></label>
            <input type="password" id="password" name="password" class="register-input" required>
            <button type="button" id="show-password-button" class="password-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30">
                    <path fill="none" d="M0 0h30v30H0z"/>
                    <path d="M15 7c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9-4.03-9-9-9zm0 15.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13zm0-11a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm0 2.5a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5z"/>
                </svg>
            </button>
            <span id="password-message" class="register-password-message"></span>
        </div>
        <input type="submit" value="Register" class="register-button">
        <button type="button" onclick="location.href='connexion.html';" class="login-button">Go back</button>
    </form>
</div>
                `;
    
                // Code for displaying the name of the selected file
                const fileInput = document.getElementById('avatar');
                const fileTrigger = document.querySelector('.register-file-trigger');
                const fileNameContainer = document.getElementById('file-name');
                
                fileInput.addEventListener('change', function(e) {
                    const fileName = e.target.files[0].name;
                    fileTrigger.textContent = fileName; 
                });
    
                // Code to manage the password field
                const passwordInput = document.getElementById('password');
                const passwordMessage = document.getElementById('password-message');
                const showPasswordButton = document.getElementById('show-password-button');
                showPasswordButton.addEventListener('mouseover', () => {
                    showPasswordButton.title = 'Show password';
                });
                showPasswordButton.addEventListener('click', () => {
                    if (passwordInput.type === 'password') {
                        passwordInput.type = 'text';
                    } else {
                        passwordInput.type = 'password';
                    }
                });
                passwordInput.addEventListener('input', () => {
                    const password = passwordInput.value;
                    const regex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;
                    if (regex.test(password)) {
                        passwordMessage.textContent = 'Password is valid';
                        passwordMessage.style.color = 'green';
                    } else {
                        passwordMessage.textContent = 'The password must contain at least 8 characters, including at least one uppercase letter, one lowercase letter, one number and one special character';
                        passwordMessage.style.color = 'red';
                    }
                });
            });
        });
    </script>
    

<script>
    document.getElementById('avatar').addEventListener('change', function(e) {
        var fileNameContainer = document.getElementById('file-name');
        var fileName = e.target.files[0].name; 
        if (fileName.length > 20) {
            
            fileName = fileName.substring(0, 20) + '...';
        }
        fileNameContainer.textContent = fileName; 
    });
</script>

<div id="credit-container" style="position: fixed; bottom: 20px; right: 20px; text-align: right;">
    <a href="https://github.com/Krook9d" target="_blank" id="credit-link" style="color: #4a4a4a; text-decoration: none; font-size: 16px;">
        <img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub Icon" style="height: 25px; vertical-align: middle; margin-right: 5px;"/> 
        Made by Krook9d
    </a>
</div>

</body>
</html>
